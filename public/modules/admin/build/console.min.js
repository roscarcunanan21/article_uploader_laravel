if("undefined"==typeof jQuery)throw new Error("jQuery is required :)");+function(){"use strict";for(var e,t=function(){},a=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],i=a.length,n=window.console=window.console||{};i--;)e=a[i],n[e]||(n[e]=t)}(),function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var e=document.createElement("style");e.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(e)}var t=navigator.userAgent;t.indexOf("Mozilla/5.0")>-1&&t.indexOf("Android ")>-1&&t.indexOf("AppleWebKit")>-1&&-1===t.indexOf("Chrome")&&$("select.form-control").removeClass("form-control").css("width","100%"),$(document).on("contextmenu",function(e){return e.preventDefault(),!1})}(),function(e){"use strict";window.is_defined=function(e){return void 0!==e&&"null"!=typeof e&&null!=e},window.is_callback=function(e){return!(!e||"function"!=typeof e)},window.is_mobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|Mobile|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},window.in_array=function(e,t){var a;if(is_defined(e)&&is_defined(t)&&"object"!=typeof e&&"object"==typeof t){try{a=t.indexOf(e)}catch(i){a=t.hasOwnProperty(e)?1:-1}return a>=0}return!1},window.array_keys=function(e){if(is_defined(e)){var t=[];for(var a in e)t.push(a);return t}},window.array_values=function(e){if(is_defined(e)){var t=[];for(var a in e)t.push(e[a]);return t}},window.array_search=function(e,t){for(var a=[],i=0;i<t.length;i++)t[i]==e&&a.push(i);return a.length>0&&(1==a.length?a[0]:a)},window.count=function(e){return"object"==typeof e?"undefined"!=e.length?Object.keys(e).length:e.length:0},window.strlen=function(e){return is_defined(e)?count(e.toString().split("")):0},window.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},window.ucwords=function(e){return e.toLowerCase().replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},window.money_format=function(e,t){return is_defined(e)?(t=is_defined(t)?t:2,e=parseFloat(e),e>0?cut_decimal(e,t):e):0},window.cut_decimal=function(e,t){if(is_defined(e)){t=is_defined(t)?t:2;var a=e.toString().split(".");is_defined(a[1])&&(a[1]=a[1].substr(0,t));var i=a.join(".");return parseFloat(i).toFixed(t)}return 0},window.balance_format=function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},window.mt_rand=function(e,t){var a=arguments.length;if(0===a)e=0,t=2147483647;else{if(1===a)throw new Error("Warning: mt_rand() expects exactly 2 parameters, 1 given");e=parseInt(e,10),t=parseInt(t,10)}return Math.floor(Math.random()*(t-e+1))+e},window.extract_args=function(t,a){var i={};return is_defined(t)&&is_defined(a)&&e.each(a,function(e,a){in_array(e,t)&&(i[a]=t[e])}),!!count(i)&&i},window.is_json=function(t){try{e.parseJSON(t)}catch(e){return!1}return!0},window.is_error=function(e){if("object"==typeof e)return!(!e.hasOwnProperty("status")||"Error"!==e.status.trim()&&"error"!==e.status.trim())},window.valid_email=function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},window.empty=function(e){return void 0===e||"null"==typeof e||null==e||""==e},window.ajax_call=function(t,a,i,n){n=is_defined(n)?n:"POST",e.ajax({url:t,data:"object"==typeof a?a:{},method:n,success:function(e){if("function"==typeof i&&i(e),"object"==typeof e&&is_error(e))throw Error(e.message)}})},window.error_call=function(t){var a={display:e("#error_notif"),message:e("#error_message")};is_defined(t)&&(a.message.html(t),a.display.fadeIn(500)),!1===t&&a.display.hide()},window.success_call=function(t){var a={display:e("#success_notif"),message:e("#success_message")};is_defined(t)&&(a.message.html(t),a.display.fadeIn(500)),!1===t&&a.display.hide()},window.strip_leading_zero=function(e){return is_defined&&"string"==typeof e&&0==e[0]?e.substring(1):e},window.is_mobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|Mobile|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}(jQuery),function(e){"use strict";e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),e.xhrPool=[],e.xhrPool.abortAll=function(){e(this).each(function(t,a){a.abort(),e.xhrPool.splice(t,1),e.ajax(a)})},e(document).ajaxComplete(function(t,a,i){var n=a.getResponseHeader("_TOKEN_");e('meta[name="csrf-token"]').attr("content",n)})}(jQuery),function(e){"use strict";e.fn.has_data=function(t){var a=t.replace("data-",""),i="data-"+a;return e(this)[0].hasAttribute(i)},e.fn.add_data=function(){var t=count(arguments),a={};return 1===t?e.each(arguments[0],function(e,t){a["data-"+e]=t}):2===t&&(a["data-"+arguments[0]]=arguments[1]),this.each(function(t,i){e.each(a,function(t,a){e(i).attr(t,a)})})},e.fn.switcher=function(t){return this.each(function(a,i){var n=e(i),o=n.siblings("span.check-value");if(0===o.length){var r=n.siblings("span.toggle");r.after('<span class="check-value">None</span>'),o=r.siblings("span.check-value")}n.change(function(){this.checked?(n.val(1),o.html("Yes")):(n.val(0),o.html("None")),void 0!==t&&"function"==typeof t&&t(this.checked)})})},e.fn.booking_steps=function(t,a,i){return a=void 0!==a&&a,i=void 0===i?{}:i,this.each(function(n,o){var r=e(o),s=e("#booking_form"),d=r.data("stepurl");d.length>0&&(!1!==r.hasClass("booking-disabled")&&!0!==a||(s.html('<div class="preloader"></div>'),e.post(d,i,function(a){s.html(a).promise().done(function(){e.material.init(),"function"==typeof t&&t()})})))})},e.fn.step_disabled=function(t){return t=void 0===t||t,this.each(function(a,i){var n=e(i);return n.length>0&&(!0===t?n.hasClass("booking-disabled")||n.addClass("booking-disabled"):n.hasClass("booking-disabled")&&n.removeClass("booking-disabled")),n})},e.fn.stars=function(){return this.each(function(t,a){for(var i=e(a),n=parseFloat(e(i).data("rating")),o=Math.ceil(n),r=5-o,s=[],t=0;t<5;t++)n>0&&(n<1&&n>0?s.push('<i class="material-icons">star_half</i>'):s.push('<i class="material-icons">star</i>')),n--;for(var d=0;d<r;d++)s.push('<i class="material-icons">star_border</i>');return i.html(s.join("\n"))})}}(jQuery),"undefined"==typeof jQuery&&error_call("jQuery is required."),function(){$.fn.chartjs=function(e){function t(e,t){if(is_defined(e)&&is_defined(t))switch(t){case"date":for(var a=e.label,i=e.data,n=e.days,o=parseInt(a[a.length-1]),r=o<n?o:n,s={},d=0;d<a.length;d++){s[a[d]]=i[d]}for(var l=1;l<=r;l++){var c=l.toString();in_array(c,a)||(s[c]=0)}e.label=Object.keys(s),e.data=Object.values(s)}return e}return $(this).each(function(a,i){e=is_defined(e)?e:"none";var n=$(i);if(is_defined(n.attr("data-chartid"))){var o=n.data("chartid"),r=is_defined(n.attr("data-width"))?n.data("width"):300,s=is_defined(n.attr("data-height"))?n.data("height"):100,d='<canvas id="'+o+'" width="'+r+'" height="'+s+'"></canvas>';n.html(d).promise().done(function(){if(is_defined(n.attr("data-stats"))){var a=t(n.data("stats"),e),i=void 0;switch(a.type){case"line":default:i={type:"line",data:{labels:a.label,datasets:[{label:a.tooltip,data:a.data,backgroundColor:"rgba(187, 82, 68, 0.7)",borderColor:"rgba(187, 82, 68, 1)",borderWidth:1,borderDash:[5,5],defaultFontSize:10}]},options:{responsive:!0,title:{display:!0,text:a.title},legend:{display:!1},tooltips:{mode:"nearest",intersect:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e,t,a){if(Math.floor(e)===e)return e}},scaleLabel:{display:!0,labelString:a.y_axis}}],xAxes:[{gridLines:{display:!1,drawOnChartArea:!1},ticks:{maxRotation:90,minRotation:90},scaleLabel:{display:!0,labelString:a.x_axis}}]}}};break;case"bar":case"pie":}var r=document.getElementById(o);return new Chart(r,i)}})}})},$.fn.rankjs=function(){return $(this).each(function(e,t){var a=$(t),i=a.data("response");if(void 0!==i&&i.length){var n=[];n.push('<ul class="rosie-list">');for(var o=0;o<10;o++){var r=o+1;n.push("<li>"),void 0!==i[o]?(n.push('<span class="rosie-list-'+o+'">'),n.push('<span class="rosie-list-rank">'+r+"</span>"),n.push(i[o].user),n.push("</span>")):n.push('<span class="rosie-list-vacant"> &nbsp </span>'),n.push("</li>")}n.push("</ul>"),a.html(n.join("\n"))}})},$.fn.toDropdown=function(e,t,a,i,n){return $(this).each(function(o,r){var s=$(r),d=s.attr("id"),l=!1;if(is_defined(t)&&is_defined(a)&&is_defined(e)&&"object"==typeof e){var c=[];c.push('<select id="'+d+'" class="form-control form-control-xs" autocomplete="off">'),is_defined(i)?c.push('<option value="null">'+i+"</option>"):c.push('<option value="null">Choose one...</option>'),$.each(e,function(e,i){i.hasOwnProperty(t)&&i.hasOwnProperty(a)&&(l=i[t]==n||l,c.push('<option value="'+i[t]+'">'+i[a]+"</option>"))}),c.push("</select>"),s.replaceWith(c.join("")),l&&$("#"+d+' option:contains("'+n+'")').prop("selected",!0)}})}}(),function(){String.prototype.capitalize=function(){var e=[];return this.split(" ").forEach(function(t){e.push(t.charAt(0).toUpperCase()+t.slice(1))}),e.join(" ")},window.notify=function(e,t,a){var i=$("#notif_modal");i.length>0&&(e=void 0===e?"Title":e,t=void 0===t?"Body":t,i.find(".modal-title").html(e),i.find(".modal-body").html(t),i.modal(),i.on("hide.bs.modal",function(){"function"==typeof a&&a()}))},window.is_error=function(e,t){if(t=!!is_defined(t)&&t,"object"==typeof e&&e.hasOwnProperty("status")&&"Error"===e.status){if(t)return!0;if("Unauthorized"===e.message)throw notify("Error","Session Timeout. Please relogin",function(){window.location.href=window.location.href}),Error(e.message)}return!1},window.alert_success=function(e){e=is_defined(e)?e:"";var t=['<div id="alert_message" class="alert alert-success" role="alert">',"<strong>Success!</strong> "+e,"</div>"].join("");return $("#notif_modal .modal-body").prepend(t),alert_prepend(t)},window.alert_error=function(e){e=is_defined(e)?e:"An unexpected error has occured. Please try again.";var t=['<div id="alert_message" class="alert alert-danger" role="alert">',"<strong>Ooops!</strong> "+e,"</div>"].join("");return alert_prepend(t)},window.alert_prepend=function(e){var t=$("#alert_message");return t.length&&t.remove(),$("#notif_modal .modal-body").prepend(e)},window.datepicker_date_now=function(){if("undefined"!=typeof __DATE_NOW){var e=__DATE_NOW.split("-");return new Date(e[0],e[1]-1,e[2])}}}(window.Dashboard=window.Dashboard||function(){},jQuery),"undefined"==typeof jQuery&&error_call("jQuery is required."),function(e,t){const a={add:"POST",edit:"PUT",delete:"DELETE"};e.prototype.CRUD=function(e,i,n,o,r){if(a.hasOwnProperty(e)){var s=a[e],d=function(e){return"Success"===e.status?o(e):r(e),!1};if(n.hasOwnProperty("avatar")&&"delete"!==e){var l=new FormData;t.each(n,function(e,a){"avatar"===e?l.append(e,t("#avatar").prop("files")[0]):l.append(e,a)});var c=in_array(e,["add","edit"])?"POST":"DELETE";t.ajax({url:i,type:c,data:l,cache:!1,processData:!1,contentType:!1,success:function(e){return d(e)},error:function(e){return d(e)}})}else ajax_call(i,n,function(e){return d(e)},s)}},e.prototype.CRUDForm=function(){var e=this;t(".dt-buttons").on("click",function(a){switch(t("#datatable_dom").data("module")){case"list_timetables":e.CRUDModules.list_timetables();break;case"users":e.CRUDModules.users()}})},e.prototype.CRUDModules={list_timetables:function(){ajax_call("get_form_data/cleaners",{},function(e){t("#fullname").toDropdown(e,"user_id","fullname","Choose a cleaner")}),t("#date_available").datepicker({autoHide:!0,zIndex:1100,offset:-50,startDate:datepicker_date_now()}),t("#time_in").toDropdown([{time_id:"07:00",time_value:"07:00"},{time_id:"07:30",time_value:"07:30"},{time_id:"08:00",time_value:"08:00"},{time_id:"08:30",time_value:"08:30"},{time_id:"09:00",time_value:"09:00"},{time_id:"09:30",time_value:"09:30"},{time_id:"10:00",time_value:"10:00"},{time_id:"10:30",time_value:"10:30"},{time_id:"11:00",time_value:"11:00"},{time_id:"11:30",time_value:"11:30"},{time_id:"12:00",time_value:"12:00"}],"time_id","time_value","Choose start time","09:00"),t("#time_out").toDropdown([{time_id:"15:00",time_value:"15:00"},{time_id:"15:30",time_value:"15:30"},{time_id:"16:00",time_value:"16:00"},{time_id:"16:30",time_value:"16:30"},{time_id:"17:00",time_value:"17:00"},{time_id:"17:30",time_value:"17:30"},{time_id:"18:00",time_value:"18:00"},{time_id:"18:30",time_value:"18:30"},{time_id:"19:00",time_value:"19:00"},{time_id:"19:30",time_value:"19:30"},{time_id:"20:00",time_value:"20:00"},{time_id:"20:30",time_value:"20:30"},{time_id:"21:00",time_value:"21:00"},{time_id:"21:30",time_value:"21:30"}],"time_id","time_value","Choose end time","19:00")},users:function(){t("[name=altEditor-form]").attr("enctype","multipart/form-data"),t("[name=altEditor-form]").attr("method","POST"),t("#avatar").replaceWith('<input type="file" id="avatar" class="input-avatar" name="avatar" />').promise().done(function(){t("#avatar").fileinput({showUpload:!1,showRemove:!1,layoutTemplates:{fileIcon:""},fileActionSettings:{indicatorNew:"",showZoom:!1}})})}}}(window.Dashboard=window.Dashboard||function(){},jQuery),"undefined"==typeof jQuery&&error_call("jQuery is required."),function(e,t){function a(e,a){var i={};return is_defined(e)&&is_defined(a)&&t.each(e,function(e,t){var n=e.toLowerCase();if(in_array(n,a)||"id"===n){var o=e.toLowerCase().split(" ").join("_");i[o]=t}}),i}function i(e,a){e=is_defined(e)?e:"";var i=[];return i.push('<div class="panel panel-rosie">'),i.push('<div class="panel-heading">'),i.push('<h1 class="panel-title">'+e+"</h1>"),i.push("</div>"),i.push('<div class="panel-body">'),i.push('<table id="datatable_dom" class="table table-responsive table-condensed table-striped table-bordered" width="100%">'),a.hasOwnProperty("columns")&&(i.push("<thead>"),i.push("<tr>"),t.each(a.columns,function(e,t){var a=t.replace("_"," ");i.push("<th>"+a.toUpperCase()+"</th>")}),i.push("</tr>"),i.push("</thead>")),i.push("</table>"),i.push("</div>"),i.push("</div>"),i.join("\n")}var n=void 0;e.prototype.init=function(){this.secure_access(),this.ui_navigation("#startup"),this.ctrl_schedules(),this.ctrl_account(),this.ctrl_logout()},e.prototype.secure_access=function(){ajax_call("console",{},function(e){e.hasOwnProperty("status")&&"Error"===e.status&&(window.location.href=window.location.href)},"GET")},e.prototype.ctrl_menu=function(e){var a=this;if(is_defined(e)&&e.length>0){var i=e.data("url");if(is_defined(i)){var n=i.toLowerCase();ajax_call(n,{},function(e){is_error(e);var i=n;switch(n){case"dashboard":t("#main_content").html(e).promise().done(function(){t(".chartjs").chartjs("date");var e=t("#booking_summary").data("response");a.ui_table(i,"Booking Summary for this Month",e,void 0,"#booking_summary"),t("#top_cleaner").rankjs()});break;case"list_timetables":a.ui_table(i,"timetables",e,["add"]);break;case"set_appointment":a.module_set_appointment(e);break;case"administrators":a.ui_table(i,n,e,["add","reset_password"]);break;case"users":case"clients":a.ui_table(i,n,e,["add","edit","delete"]);break;case"settings":a.ui_table(i,n,e,["edit"]);break;default:t("#main_content").html(e),t.material.init()}})}}},e.prototype.ctrl_schedules=function(){t("#nav_schedules").on("click",function(e){var a=t("#messagebar"),i=t("#messagebar_content");a.addClass("active"),i.animate({right:0},300),a.append('<div id="messagebar_overlay" class="messagebar-overlay"></div>'),parseInt(window.innerWidth)<=820&&i.width(parseInt(window.innerWidth)-30),t("#messagebar_overlay, #messagebar_close").on("click",function(e){t(e.target).is("#messagebar_overlay")?t(this).remove():t("#messagebar_overlay").remove(),a.removeClass("active"),i.width(450).animate({right:"-500px"},300)})})},e.prototype.ctrl_account=function(){t("#nav_account").on("click",function(e){e.preventDefault();var a=t("#modal_ok"),i=['<form class="form-horizontal" autocomplete="off">','<div class="form-section">','<div class="form-group">','<label for="old_password" class="col-lg-2 control-label form-label">Old password</label>','<div class="col-lg-10">','<input type="password" class="form-control form-control-xs" id="old_password" autocomplete="off" />',"</div>","</div>","</div>",'<div class="form-section">','<div class="form-group">','<label for="new_password" class="col-lg-2 control-label form-label">New Password</label>','<div class="col-lg-10">','<input type="password" class="form-control form-control-xs" id="new_password" autocomplete="off" />',"</div>","</div>",'<div class="form-group">','<label for="confirm_password" class="col-lg-2 control-label form-label">Confirm Password</label>','<div class="col-lg-10">','<input type="password" class="form-control form-control-xs" id="confirm_password" autocomplete="off" />',"</div>","</div>","</div>","</form>"];notify("Change Password",i.join("\n"),function(){}),a.removeAttr("data-dismiss").html("Proceed"),a.on("click",function(e){e.preventDefault();var i={old_password:t("#old_password").val().toString(),new_password:t("#new_password").val().toString(),confirm_pass:t("#confirm_password").val().toString()};i.old_password&&i.new_password&&i.confirm_pass?i.old_password!==i.new_password?i.new_password===i.confirm_pass?ajax_call("change_password",i,function(e){is_error(e,!0)?alert_error(e.message):(alert_success(e.message),a.attr("data-dismiss","modal").html("Okay"))}):alert_error("Passwords didn't matched"):alert_error("Please get a new password."):alert_error("All fields are required.")})})},e.prototype.ctrl_logout=function(){t("#nav_logout").on("click",function(e){e.preventDefault(),window.location=__BASE_URL+"/logout"})},e.prototype.ui_navigation=function(e){var a=this,i={sidebar:t("#sidebar"),navibar:t("#navibar"),content:t("#content"),sidebar_toggle:t("#sidebar_toggle"),sidebar_nav:t(".sidebar-nav > li"),sidebar_submenu:t(".sidebar-nav-sub"),main_content:t("#main_content")},o=function(){i.sidebar.toggleClass("sidebar-toggle"),i.navibar.toggleClass("navibar-toggle"),i.content.toggleClass("content-toggle")};parseInt(window.innerWidth)<=820&&o(),i.sidebar_toggle.on("click",function(){o()});var r=function(e,t){t=!is_defined(t)||t;var a=t?"expand_less":"expand_more";e.hasClass("sidebar-nav-menu")&&(e.children(".icon-right").html(a),t?e.next(".sidebar-nav-sub").slideDown():e.next(".sidebar-nav-sub").slideUp())};i.sidebar_nav.on("click",function(e){e.preventDefault();var i=t(this);i.hasClass("active")?is_defined(n)&&i.is(n)&&(r(i,!1),i.removeClass("active"),n=void 0):(is_defined(n)&&(r(n,!1),n.hasClass("active")&&(n.removeClass("active"),n=void 0)),i.addClass("active"),n=i,r(i),a.ctrl_menu(i))}),i.sidebar_submenu.children("li").on("click",function(e){e.preventDefault(),a.ctrl_menu(t(this))}),is_defined(e)&&t(e).length&&t(e).click()},e.prototype.ui_table=function(e,n,o,r,s){var d=this;if(is_defined(n)&&is_defined(o)){if(!is_defined(o)||"object"!=typeof o)throw Error("Cannot convert data to table.");var l=i(n,o);t(is_defined(s)&&t(s).length>0?s:"#main_content").html(l).promise().done(function(){if(count(o)){t("#altEditor-modal").length&&t("#altEditor-modal").remove();var i=[],s={add:{name:"add",text:'<i class="material-icons">create</i> New Record'},edit:{extend:"selected",name:"edit",text:'<i class="material-icons">build</i> Update'},delete:{extend:"selected",name:"delete",text:'<i class="material-icons">delete_forever</i> Delete'},reset_password:{extend:"selected",name:"reset_password",text:'<i class="material-icons" id="crud_reset_password">security</i> Reset Password'}};is_defined(r)&&t.each(r,function(e,t){s.hasOwnProperty(t)&&i.push(s[t])});var l=[{targets:[0],visible:!1,searchable:!1},{targets:o.editable,className:"editable_cell"}],c={users:[{targets:1,render:function(e,t,a){return'<img src="'+__AVATAR_URL+"/"+e+'" class="datatable-avatar" />'}}]};c.hasOwnProperty(n)&&t.each(c[n],function(e,t){l.push(t)});var u=t("#datatable_dom");u.data("module",e),u.DataTable({data:o.rows,columns:o.header,aaSorting:[],lengthMenu:[[10,25,50],[10,25,50,"All"]],dom:'<"search"f>Btipr',columnDefs:l,select:"single",responsive:!0,altEditor:!0,buttons:i}).on("savedata",function(e,i,r,s,l){if(in_array(i,["add","edit","delete"])){var c=n+"/"+i,u=[];t.each(o.header,function(e,t){if(in_array(e,o.editable)){var a=t.title,i=a.toLowerCase().split(" ").join("_");u.push(i)}});var f=a(r,u);r.hasOwnProperty("id")&&(f.id=r.id),d.CRUD(i,c,f,s,l)}}),t(".dt-button").addClass("btn btn-xs btn-raised btn-danger toolbar-btn-fix").removeClass("dt-button"),t("div.dataTables_filter").addClass("form-group form-filter"),t("div.dataTables_filter input").addClass("form-control"),t("div.dataTables_filter input").removeClass("input-sm"),t("div.dataTables_filter input").attr("autofocus","autofocus"),t(".dataTables_wrapper > .search").append('<div class="clearfix"></div>'),d.CRUDForm(),t.material.init()}else t("#main_content .panel-body").html('<h4 class="text-center">No available data to display.</h4>')})}},e.prototype.module_set_appointment=function(e){function a(e){return u.date.on("change",function(a){a.preventDefault();var n=t(this),o=n.find(":selected").attr("value");void 0!==o?(u.cleaner.removeAttr("disabled",!1),i(o,e)):(u.cleaner.prop("disabled","disabled"),i())})}function i(e,a){if(u.cleaner.html('<option value="undefined">Choose a Cleaner</option>'),is_defined(e)&&is_defined(a)&&void 0!==a[e]){var i=a[e],o=[];return t.each(i,function(e,t){var a=t.split("|");o.push('<option value="'+a[0]+'">'),o.push([a[1],a[2]].join(" ")),o.push("</option>")}),u.cleaner.append(o.join("")),u.cleaner.on("change",function(e){e.preventDefault(),void 0!==t(this).find(":selected").attr("value")?(u.cleaner.removeAttr("disabled",!1),n()):(u.cleaner.prop("disabled","disabled"),n(!1),d(!1))})}return!1}function n(e){e=!is_defined(e)||e,e?(u.time_start.removeAttr("disabled"),u.time_start.timepicker({minuteStep:1,showSeconds:!1,showMeridian:!1,defaultTime:!1,explicitMode:!0,template:!1}),u.time_start.on("keyup",function(e){t(this).val().length>0?o():(o(!1),d(!1))})):u.time_start.prop("disabled","disabled")}function o(e){e=!is_defined(e)||e,e?(u.time_end.removeAttr("disabled"),u.time_end.timepicker({minuteStep:1,showSeconds:!1,showMeridian:!1,defaultTime:!1,explicitMode:!0,template:!1}),u.time_end.on("keyup",function(e){t(this).val().length>0?r():(r(!1),d(!1))})):u.time_end.prop("disabled","disabled")}function r(e){e=!is_defined(e)||e,e?(u.price.removeAttr("disabled"),u.price.on("keyup",function(e){var a=t(this).val(),i=a.length,n=parseFloat(a);!isNaN(n)&&n>0&&i>0?s():(u.price.val(0),s(!1),d(!1))})):u.price.prop("disabled","disabled")}function s(e){e=!is_defined(e)||e,e?(u.supplies.removeAttr("disabled"),u.instructions.removeAttr("disabled"),d(),u.supplies.switcher(),u.instructions.switcher(function(e){var t=u.instruction_area;e?t.removeClass("hidden").hide().fadeIn(500):(t.siblings("#instruction_area").val(""),t.addClass("hidden"))})):(u.supplies.prop("disabled","disabled"),u.instructions.prop("disabled","disabled"),d(!1))}function d(e){e=!is_defined(e)||e,e?u.save_booking.removeAttr("disabled"):u.save_booking.prop("disabled","disabled")}t("#main_content").html(e),t.material.init();var l=t("#appointment_form").data("options"),c={},u={email:t("#email"),date:t("#date"),cleaner:t("#cleaner"),time_start:t("#time_start"),time_end:t("#time_end"),price:t("#price"),supplies:t("#supplies"),instructions:t("#instructions"),instruction_area:t("#instruction_area"),save_booking:t("#save_booking")};if(!(is_defined(l)&&l.length>0))throw notify("Cleaner not Available","No available cleaners at the moment. Please set up one on <b>Booking >> Timetables</b>."),Error("Cannot start the operation with incomplete data.");t.each(l,function(e,t){var a=t.date_available,i=[t.user_id,t.firstname,t.lastname].join("|");void 0===c[a]?(c[a]=[],c[a].push(i)):c[a].push(i)}),u.email.on("keyup",function(e){var i=t(this).val();if(valid_email(i)){u.date.html('<option value="undefined">Choose Available Date</option>');var n=[];t.each(c,function(e,t){n.push('<option value="'+e+'">'+e+"</option>")}),u.date.removeAttr("disabled").append(n.join("")),a(c)}}),u.save_booking.on("click",function(){var e={};t.each(u,function(a,i){if("save_booking"!==a){var n="instruction_area"===a?t("textarea#instruction_area").val():i.val();e[a]=t.trim(n)}}),ajax_call("xpressbook",e,function(e){e.hasOwnProperty("status")&&notify(e.status,e.message)})})},(new e).init()}(window.Dashboard=window.Dashboard||function(){},jQuery);